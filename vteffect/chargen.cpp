#include <cstdio>
#include <numeric>

#include "effect.h"
#include "coord.h"

namespace {

const char *const glyphs[128][10] = {
    {   // 0
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 1
        "________",
        "___X____",
        "__XXX___",
        "_XXXXX__",
        "XXXXXXX_",
        "_XXXXX__",
        "__XXX___",
        "___X____",
        "________",
        "________",
    },
    {   // 2
        "________",
        "X__X__X_",
        "_X___X__",
        "X__X__X_",
        "_X___X__",
        "X__X__X_",
        "_X___X__",
        "X__X__X_",
        "________",
        "________",
    },
    {   // 3
        "________",
        "X___X___",
        "X___X___",
        "XXXXX___",
        "X___X___",
        "X___X___",
        "__XXXXX_",
        "____X___",
        "____X___",
        "____X___",
    },
    {   // 4
        "________",
        "XXXX____",
        "X_______",
        "XXX_____",
        "X_______",
        "X__XXXX_",
        "___X____",
        "___XXX__",
        "___X____",
        "___X____",
    },
    {   // 5
        "________",
        "_XXXX___",
        "X_______",
        "X_______",
        "_XXXX___",
        "__XXXX__",
        "__X___X_",
        "__XXXX__",
        "__X___X_",
        "__X___X_",
    },
    {   // 6
        "________",
        "X_______",
        "X_______",
        "X_______",
        "XXXXX___",
        "__XXXXX_",
        "__X_____",
        "__XXXX__",
        "__X_____",
        "__X_____",
    },
    {   // 7
        "________",
        "__XXX___",
        "_X___X__",
        "_X___X__",
        "__XXX___",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 8
        "________",
        "________",
        "___X____",
        "___X____",
        "XXXXXXX_",
        "___X____",
        "___X____",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 9
        "________",
        "X___X___",
        "XX__X___",
        "X_X_X___",
        "X__XX___",
        "X___X___",
        "__X_____",
        "__X_____",
        "__X_____",
        "__XXXXX_",
    },
    {   // 10
        "________",
        "X___X___",
        "X___X___",
        "_X_X____",
        "__X_____",
        "__XXXXX_",
        "____X___",
        "____X___",
        "____X___",
        "____X___",
    },
    {   // 11
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "XXXX____",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 12
        "________",
        "________",
        "________",
        "________",
        "XXXX____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 13
        "________",
        "________",
        "________",
        "________",
        "___XXXXX",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 14
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___XXXXX",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 15
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "XXXXXXXX",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 16
        "XXXXXXXX",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 17
        "________",
        "________",
        "XXXXXXXX",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 18
        "________",
        "________",
        "________",
        "________",
        "XXXXXXXX",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 19
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "XXXXXXXX",
        "________",
        "________",
        "________",
    },
    {   // 20
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "XXXXXXXX",
        "________",
    },
    {   // 21
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___XXXXX",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 22
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "XXXX____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 23
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "XXXXXXXX",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 24
        "________",
        "________",
        "________",
        "________",
        "XXXXXXXX",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 25
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
    },
    {   // 26
        "________",
        "______X_",
        "____X___",
        "__X_____",
        "X_______",
        "__X_____",
        "____X___",
        "______X_",
        "XXXXXXX_",
        "________",
    },
    {   // 27
        "________",
        "X_______",
        "__X_____",
        "____X___",
        "______X_",
        "____X___",
        "__X_____",
        "X_______",
        "XXXXXXX_",
        "________",
    },
    {   // 28
        "________",
        "________",
        "________",
        "XXXXXXX_",
        "__X__X__",
        "__X__X__",
        "__X__X__",
        "_X___X__",
        "________",
        "________",
    },
    {   // 29
        "________",
        "______X_",
        "_____X__",
        "XXXXXXX_",
        "___X____",
        "XXXXXXX_",
        "_X______",
        "X_______",
        "________",
        "________",
    },
    {   // 30
        "________",
        "___XXX__",
        "__X___X_",
        "__X_____",
        "XXXXX___",
        "__X_____",
        "_XXXX___",
        "X_X__XX_",
        "_X______",
        "________",
    },
    {   // 31
        "________",
        "________",
        "________",
        "________",
        "___X____",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 32
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 33
        "________",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "________",
        "___X____",
        "________",
        "________",
    },
    {   // 34
        "________",
        "__X__X__",
        "__X__X__",
        "__X__X__",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 35
        "________",
        "_X__X___",
        "_X__X___",
        "XXXXXX__",
        "_X__X___",
        "XXXXXX__",
        "_X__X___",
        "_X__X___",
        "________",
        "________",
    },
    {   // 36
        "________",
        "_X__X___",
        "_XXXXX__",
        "X__X____",
        "_XXXXX__",
        "___X__X_",
        "_XXXXX__",
        "___X____",
        "________",
        "________",
    },
    {   // 37
        "________",
        "XX____X_",
        "XX___X__",
        "____X___",
        "___X____",
        "__X_____",
        "_X___XX_",
        "X____XX_",
        "________",
        "________",
    },
    {   // 38
        "________",
        "_XXX____",
        "X___X___",
        "X___X___",
        "_XXX____",
        "X___X_X_",
        "X____X__",
        "XXXXX_X_",
        "________",
        "________",
    },
    {   // 39
        "________",
        "___XX___",
        "___X____",
        "__X_____",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 40
        "________",
        "____X___",
        "___X____",
        "__X_____",
        "__X_____",
        "__X_____",
        "___X____",
        "____X___",
        "________",
        "________",
    },
    {   // 41
        "________",
        "__X_____",
        "___X____",
        "____X___",
        "____X___",
        "____X___",
        "___X____",
        "__X_____",
        "________",
        "________",
    },
    {   // 42
        "________",
        "________",
        "_X___X__",
        "__X_X___",
        "XXXXXXX_",
        "__X_X___",
        "_X___X__",
        "________",
        "________",
        "________",
    },
    {   // 43
        "________",
        "________",
        "___X____",
        "___X____",
        "XXXXXXX_",
        "___X____",
        "___X____",
        "________",
        "________",
        "________",
    },
    {   // 44
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "__XX____",
        "__X_____",
        "_X______",
        "________",
    },
    {   // 45
        "________",
        "________",
        "________",
        "________",
        "XXXXXXX_",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 46
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "__XX____",
        "__XX____",
        "________",
        "________",
    },
    {   // 47
        "________",
        "______X_",
        "_____X__",
        "____X___",
        "___X____",
        "__X_____",
        "_X______",
        "X_______",
        "________",
        "________",
    },
    {   // 48
        "________",
        "__XXX___",
        "_X___X__",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "_X___X__",
        "__XXX___",
        "________",
        "________",
    },
    {   // 49
        "________",
        "___X____",
        "__XX____",
        "_X_X____",
        "___X____",
        "___X____",
        "___X____",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 50
        "________",
        "_XXXX___",
        "X____X__",
        "______X_",
        "___XXX__",
        "_XX_____",
        "X_______",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 51
        "________",
        "XXXXXXX_",
        "_____X__",
        "____X___",
        "___XXX__",
        "______X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 52
        "________",
        "____X___",
        "___XX___",
        "__X_X___",
        "_X__X___",
        "XXXXXXX_",
        "____X___",
        "____X___",
        "________",
        "________",
    },
    {   // 53
        "________",
        "XXXXXXX_",
        "X_______",
        "X_XXXX__",
        "XX____X_",
        "______X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 54
        "________",
        "__XXXX__",
        "_X____X_",
        "X_______",
        "X_XXXX__",
        "XX____X_",
        "_X____X_",
        "__XXXX__",
        "________",
        "________",
    },
    {   // 55
        "________",
        "XXXXXXX_",
        "______X_",
        "_____X__",
        "____X___",
        "___X____",
        "__X_____",
        "_X______",
        "________",
        "________",
    },
    {   // 56
        "________",
        "_XXXXX__",
        "X_____X_",
        "X_____X_",
        "_XXXXX__",
        "X_____X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 57
        "________",
        "_XXXX___",
        "X____X__",
        "X____XX_",
        "_XXXX_X_",
        "______X_",
        "X____X__",
        "_XXXX___",
        "________",
        "________",
    },
    {   // 58
        "________",
        "________",
        "__XX____",
        "__XX____",
        "________",
        "________",
        "__XX____",
        "__XX____",
        "________",
        "________",
    },
    {   // 59
        "________",
        "________",
        "__XX____",
        "__XX____",
        "________",
        "________",
        "__XX____",
        "__X_____",
        "_X______",
        "________",
    },
    {   // 60
        "________",
        "______X_",
        "____X___",
        "__X_____",
        "X_______",
        "__X_____",
        "____X___",
        "______X_",
        "________",
        "________",
    },
    {   // 61
        "________",
        "________",
        "________",
        "XXXXXXX_",
        "________",
        "XXXXXXX_",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 62
        "________",
        "X_______",
        "__X_____",
        "____X___",
        "______X_",
        "____X___",
        "__X_____",
        "X_______",
        "________",
        "________",
    },
    {   // 63
        "________",
        "_XXXXX__",
        "X_____X_",
        "____XX__",
        "___X____",
        "___X____",
        "________",
        "___X____",
        "________",
        "________",
    },
    {   // 64
        "________",
        "_XXXXX__",
        "X_____X_",
        "X___X_X_",
        "X__X__X_",
        "X__XXX__",
        "X_______",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 65
        "________",
        "___X____",
        "__X_X___",
        "_X___X__",
        "X_____X_",
        "XXXXXXX_",
        "X_____X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 66
        "________",
        "XXXXXX__",
        "_X____X_",
        "_X____X_",
        "_XXXXX__",
        "_X____X_",
        "_X____X_",
        "XXXXXX__",
        "________",
        "________",
    },
    {   // 67
        "________",
        "__XXXX__",
        "_X____X_",
        "X_______",
        "X_______",
        "X_______",
        "_X____X_",
        "__XXXX__",
        "________",
        "________",
    },
    {   // 68
        "________",
        "XXXXX___",
        "_X___X__",
        "_X____X_",
        "_X____X_",
        "_X____X_",
        "_X___X__",
        "XXXXX___",
        "________",
        "________",
    },
    {   // 69
        "________",
        "XXXXXXX_",
        "X_______",
        "X_______",
        "XXXXX___",
        "X_______",
        "X_______",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 70
        "________",
        "XXXXXXX_",
        "X_______",
        "X_______",
        "XXXXX___",
        "X_______",
        "X_______",
        "X_______",
        "________",
        "________",
    },
    {   // 71
        "________",
        "__XXXX__",
        "_X____X_",
        "X_______",
        "X_______",
        "X___XXX_",
        "_X____X_",
        "__XXXX__",
        "________",
        "________",
    },
    {   // 72
        "________",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "XXXXXXX_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 73
        "________",
        "_XXXXX__",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 74
        "________",
        "____XXX_",
        "_____X__",
        "_____X__",
        "_____X__",
        "_____X__",
        "X____X__",
        "_XXXX___",
        "________",
        "________",
    },
    {   // 75
        "________",
        "X_____X_",
        "X___XX__",
        "X_XX____",
        "XX______",
        "X_XX____",
        "X___XX__",
        "X_____X_",
        "________",
        "________",
    },
    {   // 76
        "________",
        "X_______",
        "X_______",
        "X_______",
        "X_______",
        "X_______",
        "X_______",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 77
        "________",
        "X_____X_",
        "XX___XX_",
        "X_X_X_X_",
        "X__X__X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 78
        "________",
        "X_____X_",
        "XX____X_",
        "X_X___X_",
        "X__X__X_",
        "X___X_X_",
        "X____XX_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 79
        "________",
        "_XXXXX__",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 80
        "________",
        "XXXXXX__",
        "X_____X_",
        "X_____X_",
        "XXXXXX__",
        "X_______",
        "X_______",
        "X_______",
        "________",
        "________",
    },
    {   // 81
        "________",
        "_XXXXX__",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X___X_X_",
        "X____X__",
        "_XXXX_X_",
        "________",
        "________",
    },
    {   // 82
        "________",
        "XXXXXX__",
        "X_____X_",
        "X_____X_",
        "XXXXXX__",
        "X___X___",
        "X____X__",
        "X_____X_",
        "________",
        "________",
    },
    {   // 83
        "________",
        "_XXXXX__",
        "X_____X_",
        "X_______",
        "_XXXXX__",
        "______X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 84
        "________",
        "XXXXXXX_",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "________",
        "________",
    },
    {   // 85
        "________",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 86
        "________",
        "X_____X_",
        "X_____X_",
        "_X___X__",
        "_X___X__",
        "__X_X___",
        "__X_X___",
        "___X____",
        "________",
        "________",
    },
    {   // 87
        "________",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "X__X__X_",
        "X__X__X_",
        "X_X_X_X_",
        "_X___X__",
        "________",
        "________",
    },
    {   // 88
        "________",
        "X_____X_",
        "_X___X__",
        "__X_X___",
        "___X____",
        "__X_X___",
        "_X___X__",
        "X_____X_",
        "________",
        "________",
    },
    {   // 89
        "________",
        "X_____X_",
        "_X___X__",
        "__X_X___",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "________",
        "________",
    },
    {   // 90
        "________",
        "XXXXXXX_",
        "_____X__",
        "____X___",
        "___X____",
        "__X_____",
        "_X______",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 91
        "________",
        "__XXXX__",
        "__X_____",
        "__X_____",
        "__X_____",
        "__X_____",
        "__X_____",
        "__XXXX__",
        "________",
        "________",
    },
    {   // 92
        "________",
        "X_______",
        "_X______",
        "__X_____",
        "___X____",
        "____X___",
        "_____X__",
        "______X_",
        "________",
        "________",
    },
    {   // 93
        "________",
        "_XXXX___",
        "____X___",
        "____X___",
        "____X___",
        "____X___",
        "____X___",
        "_XXXX___",
        "________",
        "________",
    },
    {   // 94
        "________",
        "___X____",
        "__X_X___",
        "_X___X__",
        "X_____X_",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 95
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 96
        "________",
        "__XX____",
        "___X____",
        "____X___",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 97
        "________",
        "________",
        "________",
        "_XXXXX__",
        "______X_",
        "_XXXXXX_",
        "X_____X_",
        "_XXXXXX_",
        "________",
        "________",
    },
    {   // 98
        "________",
        "________",
        "X_______",
        "X_XXXX__",
        "XX____X_",
        "X_____X_",
        "XX____X_",
        "X_XXXXX_",
        "________",
        "________",
    },
    {   // 99
        "________",
        "________",
        "________",
        "__XXXX__",
        "_X____X_",
        "X_______",
        "_X______",
        "__XXXXX_",
        "________",
        "________",
    },
    {   // 100
        "________",
        "________",
        "______X_",
        "_XXXX_X_",
        "X____XX_",
        "X_____X_",
        "X____XX_",
        "_XXXX_X_",
        "________",
        "________",
    },
    {   // 101
        "________",
        "________",
        "________",
        "_XXXXX__",
        "X_____X_",
        "XXXXXXX_",
        "X_______",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 102
        "________",
        "___XXX__",
        "__X___X_",
        "__X_____",
        "XXXXX___",
        "__X_____",
        "__X_____",
        "__X_____",
        "________",
        "________",
    },
    {   // 103
        "________",
        "________",
        "______X_",
        "_XXXX_X_",
        "X____X__",
        "X____X__",
        "_XXXXX__",
        "_____X__",
        "X____X__",
        "_XXXX___",
    },
    {   // 104
        "________",
        "X_______",
        "X_______",
        "X_XXXX__",
        "XX____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 105
        "________",
        "___X____",
        "________",
        "__XX____",
        "___X____",
        "___X____",
        "___X____",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 106
        "________",
        "_____X__",
        "________",
        "_____X__",
        "_____X__",
        "_____X__",
        "_____X__",
        "X____X__",
        "X____X__",
        "_XXXX___",
    },
    {   // 107
        "________",
        "X_______",
        "X_______",
        "X___X___",
        "X__X____",
        "XXXX____",
        "X___X___",
        "X_____X_",
        "________",
        "________",
    },
    {   // 108
        "________",
        "__XX____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "___X____",
        "__XXX___",
        "________",
        "________",
    },
    {   // 109
        "________",
        "________",
        "________",
        "XX___X__",
        "X_X_X_X_",
        "X__X__X_",
        "X__X__X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 110
        "________",
        "________",
        "________",
        "X_XXXX__",
        "XX____X_",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "________",
        "________",
    },
    {   // 111
        "________",
        "________",
        "________",
        "_XXXXX__",
        "X_____X_",
        "X_____X_",
        "X_____X_",
        "_XXXXX__",
        "________",
        "________",
    },
    {   // 112
        "________",
        "________",
        "________",
        "X_XXXX__",
        "XX____X_",
        "XX____X_",
        "X_XXXX__",
        "X_______",
        "X_______",
        "X_______",
    },
    {   // 113
        "________",
        "________",
        "________",
        "_XXXX_X_",
        "X____XX_",
        "X____XX_",
        "_XXXX_X_",
        "______X_",
        "______X_",
        "______X_",
    },
    {   // 114
        "________",
        "________",
        "________",
        "X__XXX__",
        "_XX___X_",
        "_X______",
        "_X______",
        "_X______",
        "________",
        "________",
    },
    {   // 115
        "________",
        "________",
        "________",
        "_XXXXX__",
        "X_______",
        "_XXXXX__",
        "______X_",
        "XXXXXX__",
        "________",
        "________",
    },
    {   // 116
        "________",
        "__X_____",
        "__X_____",
        "XXXXX___",
        "__X_____",
        "__X_____",
        "__X__X__",
        "___XX___",
        "________",
        "________",
    },
    {   // 117
        "________",
        "________",
        "________",
        "X____X__",
        "X____X__",
        "X____X__",
        "X____X__",
        "_XXXX_X_",
        "________",
        "________",
    },
    {   // 118
        "________",
        "________",
        "________",
        "X_____X_",
        "X_____X_",
        "_X___X__",
        "__X_X___",
        "___X____",
        "________",
        "________",
    },
    {   // 119
        "________",
        "________",
        "________",
        "X_____X_",
        "X_____X_",
        "X__X__X_",
        "X_X_X_X_",
        "_X___X__",
        "________",
        "________",
    },
    {   // 120
        "________",
        "________",
        "________",
        "X____X__",
        "_X__X___",
        "__XX____",
        "_X__X___",
        "X____X__",
        "________",
        "________",
    },
    {   // 121
        "________",
        "________",
        "________",
        "X____X__",
        "X____X__",
        "X___XX__",
        "_XXX_X__",
        "_____X__",
        "X____X__",
        "_XXXX___",
    },
    {   // 122
        "________",
        "________",
        "________",
        "XXXXXXX_",
        "_____X__",
        "___XX___",
        "__X_____",
        "XXXXXXX_",
        "________",
        "________",
    },
    {   // 123
        "________",
        "____XXX_",
        "___X____",
        "___X____",
        "_XX_____",
        "___X____",
        "___X____",
        "____XXX_",
        "________",
        "________",
    },
    {   // 124
        "________",
        "___X____",
        "___X____",
        "___X____",
        "________",
        "________",
        "___X____",
        "___X____",
        "___X____",
        "________",
    },
    {   // 125
        "________",
        "XXX_____",
        "___X____",
        "___X____",
        "____XX__",
        "___X____",
        "___X____",
        "XXX_____",
        "________",
        "________",
    },
    {   // 126
        "________",
        "_XX___X_",
        "X__X__X_",
        "X___XX__",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    },
    {   // 127
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
        "________",
    }
};

struct glyph_mask
{
    unsigned int mask[10] = { 0 };
};

glyph_mask make_glyph_mask(const char *const rows[10])
{
    glyph_mask mask;
    for (int i = 0; i < 10; ++i)
    {
        for (int j = 0; j < 8; ++j)
        {
            mask.mask[i] |= (rows[i][j] == 'X') ? 1 : 0;
            mask.mask[i] <<= 1;
        }
    }
    return mask;
}

glyph_mask masks[128];

void init_masks()
{
    for (int i = 0; i < 128; ++i)
    {
        masks[i] = make_glyph_mask(glyphs[i]);
    }
}

struct path_cost
{
    int left;
    int right;
    int cost;
};

int pixel_count(int glyph, int begin, int end)
{
    int count = 0;
    for (int line = begin; line < end; ++line)
    {
        count += std::accumulate(
            &glyphs[glyph][line][0], &glyphs[glyph][line][8], 0,
            [](int sum, char val) {
                return sum + (val == 'X') ? 1 : 0;
            });
    }
    return count;
}

int underline_count(int glyph, int begin, int end)
{
    int count = pixel_count(glyph, begin, end);
    if (begin < 9 && 9 < end)
    {
        for (int col = 0; col < 10; ++col)
        {
            if (glyphs[glyph][9][col] == '_')
                ++count;
        }
    }
    return count;
}

int reverse_count(int glyph, int begin, int end)
{
    return (end - begin)*8 - pixel_count(glyph, begin, end);
}

int range(int val)
{
    return static_cast<int>(255.0*val/(8.0*5.0));
}

} // namespace

#if defined(DELETED)
void line(const coord &p1, const coord &p2)
{
    if (p1.row > p2.row)
    {
        line(p2, p1);
        return;
    }

    int col = p1.col;
    coord last{p1};
    goto(p1, last);
    for (int row = p1.row+1; row <= p2.row; ++row)
    {
        coord c{row, col};
    }
}
#endif

void box(const options &opts)
{
    for (int glyph = 0; glyph < 128; ++glyph)
    {
        std::printf("%d (%d, %d), (%d, %d), (%d, %d)\n", glyph,
            range(pixel_count(glyph, 0, 5)),
            range(pixel_count(glyph, 5, 10)),
            range(underline_count(glyph, 0, 5)),
            range(underline_count(glyph, 5, 10)),
            range(reverse_count(glyph, 0, 5)),
            range(reverse_count(glyph, 5, 10)));

    }
}

